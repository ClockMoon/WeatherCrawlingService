<<<<<<< HEAD
ë°°í¬ ë¸ŒëŸ°ì¹˜ ìž…ë‹ˆë‹¤!
=======
# Example

**ì„œë¹„ìŠ¤ ì£¼ì†Œìž…ë‹ˆë‹¤.**

[http://pastweathercrawler.tk/](http://pastweathercrawler.tk/)
ê¸°ìƒì²­ì˜ ê³¼ê±°ìžë£Œ ë°ì´í„°ë¥¼ í¬ë¡¤ë§ í•˜ì—¬ ì—‘ì…€ íŒŒì¼ë¡œ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.

**ë‹¤ìŒ ì£¼ì†Œì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤.**

[http://www.weather.go.kr/weather/climate/past_table.jsp ]([http://www.weather.go.kr/weather/climate/past_table.jsp)

**ì´ë ‡ê²Œ ì‚¬ìš©ë©ë‹ˆë‹¤.**

í•´ë‹¹ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ë©´ ë‹¤ëŸ‰ì˜ ë°ì´í„°ë¥¼ ì‰½ê²Œ ì—‘ì…€ íŒŒì¼ë¡œ ì˜®ê¸¸ ìˆ˜ ìžˆê³ , 1ë…„ ë‹¨ìœ„ë¡œ í•œ ì—´ì— ì •ë ¬ë˜ê¸° ë•Œë¬¸ì—, ì°¨íŠ¸ë‚˜ ê³„ì‚°í•˜ê¸° ì‰½ê³  ì´ëŠ” ë¹ ë¥¸ ì—°êµ¬ì§„í–‰ìœ¼ë¡œ ì´ì–´ì§ˆ ê²ƒìž…ë‹ˆë‹¤. ë˜í•œ GISí”„ë¡œê·¸ëž¨ì˜ í…Œì´ë¸”ì— ì ìš©í•˜ê¸° ì‰¬ìš´ í¬ë§·ìœ¼ë¡œ ìž‘ì„±ë˜ê¸° ë•Œë¬¸ì—, GISë¥¼ ì´ìš©í•œ ê¸°ìƒì—°êµ¬ì—ë„ ë„ì›€ì´ ë©ë‹ˆë‹¤.

**ì•„ëž˜ì™€ ê°™ì€ í¬ë©§ìœ¼ë¡œ ë‹¤ìš´ ë°›ì•„ ì§‘ë‹ˆë‹¤.**

![](https://user-images.githubusercontent.com/39228032/62817387-9d38fe00-bb70-11e9-84fa-b1bd5c0f28ea.PNG)

**ë‹¤ìŒê³¼ ê°™ì´ ì—‘ì´ ì—‘ì…€ë¡œ ì‰½ê²Œ ì°¨íŠ¸ë¥¼ ë§Œë“¤ ìˆ˜ ìžˆìŠµë‹ˆë‹¤**
![](https://user-images.githubusercontent.com/39228032/62817386-9d38fe00-bb70-11e9-82a6-b2b5d5e8fa44.PNG)

# Detail

**íšŒì› ê°€ìž…**

í•´ë‹¹ ì„œë¹„ìŠ¤ëŠ” ë³„ë‹¤ë¥¸ íšŒì›ê°€ìž… ê³¼ì •ì„ ê±°ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ë¡œê·¸ì¸ ì‹œ IDê°€ ì—†ëŠ” ì‚¬ìš©ìžë¼ë©´ íšŒì› ê°€ìž… í›„ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.
ë‹¤ë§Œ IDê°€ ì´ë¯¸ ìžˆë‹¤ë©´ IDì— ë§žëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ ìž…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤ :)

**ë¡œê·¸ì¸**

ë¡œê·¸ì¸ì„ í•˜ê²Œ ë˜ë©´, ì´ì „ì— ë§Œë“¤ì–´ì§„ Card ì •ë³´ë¥¼ ìµœëŒ€ 5ê°œ ê¹Œì§€ ê¸°ì–µí•´ë‘˜ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

**íŒŒì¼ì´ í´ ê²½ìš°**

ìš”ì²­ì´ ì˜¤ëž˜ ê±¸ë¦´ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ìµœëŒ€ 1ë¶„ê¹Œì§€ ìž ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”!

## ê°œë°œ ë„êµ¬

### FrontEnd

- React
- Redux
- Hooks
- Redux-saga
- Axios
- Jest
- Enzyme
- EC2

### BackEnd

- Express
- Mocha
- Axios
- excel4node
- passport
- Sequelize
- cheerio
- EC2

## í…ŒìŠ¤íŠ¸ ì½”ë“œ

### FrontEnd

**ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ í…ŒìŠ¤íŠ¸**

    describe("DashBoard ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸.", () => {
        it("DashBoardê°€ ì •ìƒì ìœ¼ë¡œ ë Œë”ë§ë©ë‹ˆë‹¤.", () => {
        const  component  =  mount(
    	    <Provider  store={store()}>
    		    <DashBoard  />
    	    </Provider>
        );
        const  dashboardContainer  =  component.find(".dashboardContainer");
        expect(dashboardContainer.debug()).toMatchSnapshot();
        });
    });

**ë¦¬ë“€ì„œ í…ŒìŠ¤íŠ¸**

    describe("Posts Reducer", () => {
        it("ì¹´ë“œ ì¶”ê°€ ì•¡ì…˜ì— ì„±ê³µí•œë‹¤..", async () => {
    	    const  cards  = [];
    	    const  addCardDummy  = {
    		   ...
    	    };
    	    const  expectedState  = {
    	    cardNumber:  cards.length  +  1,
    	    cards:  cards.concat(addCardDummy),
    	    ...
    	    };
    	    const  newState  =  cardReducer(undefined, {
    		    type:  ADD_CARD_SUCCESS,
    		    payload:  addCardDummy
    	    });
    	    expect(newState).toEqual(expectedState);
        });
    });

**ë¦¬ë•ìŠ¤ ì‚¬ê°€ í…ŒìŠ¤íŠ¸**

    describe("addCard REQUEST", () => {

    	it("ì •ìƒì ìœ¼ë¡œ ë™ê¸° ì‹¤í–‰ì„ í•œë‹¤.", () => {
    		const  action  = {
    			payload:  undefined
    		};
    		const  iterator  =  addCard(action);
    		expect(iterator.next().value).toEqual(call(addCardAPI, undefined));
    		expect(iterator.next({ data:  undefined }).value).toEqual(
    			put({
    				type:  ADD_CARD_SUCCESS,
    				payload:  undefined
    			})
    		);
    	});
    });

### BackEnd

**ì—‘ì…€ íŒŒì‹± í…ŒìŠ¤íŠ¸**

    const  should  =  require("should");
    const  WeatherCrawler  =  require("../utils/excelMaker");
    const { crawlingWeatherData } =  require("../utils/crawler");
    describe("ì—‘ì…€ ë°ì´í„° íŒŒì‹± í…ŒìŠ¤íŠ¸", () => {
        let  result  =  null;
        before("ë°ì´í„° ê°€ì ¸ì˜¤ê¸°", async () => {
    	    result  =  await  crawlingWeatherData({
    	    locationCode:  108,
    	    year:  2019,
    	    factorCode:  7
    	    });
        });
        it("GlobalDay ìž‘ë™ ì—¬ë¶€ í™•ì¸ í•˜ê¸°", () => {
    	    const  Test  =  new  WeatherCrawler();
    	    Test.getGlobalDay().should.be.equal(1);
    	    Test.upGlobalDay();
    	    Test.getGlobalDay().should.be.equal(2);
        });
        it("ì¸ìž ì´ë¦„ ê°€ì ¸ì˜¤ê¸°", () => {
    	    const  Test  =  new  WeatherCrawler();
    	    const  factorname  =  Test.getFactorName(result);
    	    factorname.should.be.exactly("ì¼í‰ê· ê¸°ì˜¨");
        });
        ....
        it("ì—‘ì…€ íŒŒì¼ì— í•˜ë‚˜ì˜ ìš”ì†Œ/ ìœ¤ë…„ í¬í•¨ ì—¬ëŸ¬ ë…„ì˜ ë°ì´í„° ìž‘ì„±(ë…„ë„ ìˆœì„œë¥¼ ë³´ìž¥ í•  ê²ƒ)", async  done  => {
    	    const  Test  =  new  WeatherCrawler();
    	    const  informationDatas  = [{..}]
    	    let  otherResult  =  null;
    	    Promise.all(
    	    informationDatas.map(async  information  => {
    	    otherResult  =  await  crawlingWeatherData(information);
    	    Test.inputOneYearFactorData(
    	    otherResult.factors,
    	    information.locationCode,
    	    information.year,
    	    information.factorCode
    	    ).write("./sampleExcelFile/OneFactorDataInTwoYears.xlsx");
    	    })
    	    );
    	    done();
        });

## ë°°í¬

EC2ë¥¼ ì´ìš©í•˜ì—¬ FrontServerì™€ BackEnd ì„œë²„ë¥¼ ë¶„ë¦¬í•˜ì—¬ ë¦¬ëˆ…ìŠ¤ ì„œë²„ì— ë°°í¬ ì¤‘

## ê¸°íƒ€ ì´ìŠˆ

**ë°±ì—”ë“œì—ì„œ ë§Œë“¤ì–´ì§„ .xlsx íŒŒì¼ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ë‹¬ ë¬¸ì œ**

    const  url  =  window.URL.createObjectURL(new  Blob([response.data]));
    const  link  =  document.createElement("a");
    link.href  =  url;
    link.setAttribute("download", "Weather.xlsx");
    document.body.appendChild(link);
    link.click();

ìš”ì²­ë°›ì€ ë°ì´í„°ë¥¼ í”„ë¡ íŠ¸ì—ì„œ Blobìœ¼ë¡œ ì €ìž¥í•˜ì—¬ ë§í¬ë¥¼ ë§Œë“¤ì–´, í´ë¦­ì´ë²¤íŠ¸ë¥¼ ë‹¤ì‹œ ë°œìƒì‹œì¼œ ë‹¤ìš´ ë°›ë„ë¡ ìœ ë„

**ë°±ì—”ë“œì™€ í´ë¼ì´ì–¸íŠ¸ ë¶„ë¦¬ë¡œ ì¸í•œ ì¿ í‚¤ ê³µìœ  ë¬¸ì œ**

    app.use(
        session({
        secret:  process.env.COOKIE_SECRET,
        cookie: {
    	    domain:  ".pastweathercrawler.tk"
        },

ë°±ì—”ë“œ ì„œë²„ì— ì„œë¸Œ ë„ë©”ì¸ì„ ì œê³µ í•œ í›„ ì¿ í‚¤ì˜ ê³µìœ  ê¶Œí•œì„ ë°±ì—”ë“œ ì„œë²„ì— í™•ëŒ€

**ê¸°ìƒì²­ ë°ì´í„° ìš”ì²­ì‹œ ì¸ì½”ë”© ë¬¸ì œ**

    const  getHttpWeatherData  =  async  weatherInfomation  => {
        const  response  =  await  axios.request({
    	    method:  "GET",
    	    url:  http://www.weather.go.kr/weather/climate/past_table.jsp?stn=${
    	    weatherInfomation.locationCode
    	    }&yy=${weatherInfomation.year}&obs=${
    	    weatherInfomation.factorCode
    	    }&x=16&y=6,
    	    responseType:  "arraybuffer",
    	    responseEncoding:  "binary"
        });
        if (response.status  ==  200) {
    	    return  iconv.decode(response.data, "euc-kr").toString();
        }
        return  new  Error("íŽ˜ì´ì§€ ì—ëŸ¬");
    };

ë²„í¼ë¡œ ë°›ì€ í›„ iconvë¡œ ì¸ì½”ë”©

**í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë¡œê·¸ì¸ ëœ ìœ ì € load ì‹œì— ìž ì‹œ ë™ì•ˆ ë¡œê·¸ì¸ì´ ì•ˆë˜ëŠ” ìƒí™©**

ë°ì´í„°ë¥¼ Fetchí•˜ê¸° ì´ì „ì— í™”ë©´ì´ ë Œë”ë§ ë˜ëŠ” ê²ƒìœ¼ë¡œ íŒŒì•…í•˜ì—¬ ì²« í™”ë©´ì—ì„œ ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ìœ¼ë¡œ ë¬¸ì œ í•´ê²°

## Q&A

ë§Œì•½ ì‚¬ìš©ì˜ ë¶ˆíŽ¸í•¨ì´ë‚˜, ê¶ê¸ˆí•œ ì ì´ ìžˆì„ ì‹œì— ì–¸ì œë“ ì§€ ë‹¤ìŒ ì£¼ì†Œë¡œ ì—°ë½í•´ì£¼ì„¸ìš”.
jiwon3346@gmail.com

## í˜„ìž¬ ì§„í–‰ ìƒí™©

í…ŒìŠ¤íŠ¸ ì½”ë“œ ìž‘ì„± ì¤‘...
>>>>>>> parent of 70fb057... ¸¶Å© ´Ù¿î ±â¼ú ¸í½Ã Ãß°¡
